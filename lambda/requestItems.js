"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handler = void 0;
const client_sfn_1 = require("@aws-sdk/client-sfn");
const sfn = new client_sfn_1.SFNClient();
const handler = async (event = {}) => {
    const body = typeof event.body === 'string' ? JSON.parse(event.body) : event.body || {};
    const { count = 1, type = "word_search", lang = "en" } = body;
    // Build the items array
    const items = Array.from({ length: count }, () => ({ type, lang }));
    const stateMachineArn = process.env.STATE_MACHINE_ARN;
    const input = JSON.stringify({ items });
    const command = new client_sfn_1.StartExecutionCommand({
        stateMachineArn,
        input
    });
    const result = await sfn.send(command);
    return {
        statusCode: 200,
        headers: {
            "Access-Control-Allow-Origin": "*"
        },
        body: JSON.stringify({ ok: true, executionArn: result.executionArn })
    };
};
exports.handler = handler;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVxdWVzdEl0ZW1zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicmVxdWVzdEl0ZW1zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLG9EQUF1RTtBQUV2RSxNQUFNLEdBQUcsR0FBRyxJQUFJLHNCQUFTLEVBQUUsQ0FBQztBQUVyQixNQUFNLE9BQU8sR0FBRyxLQUFLLEVBQUUsUUFBYSxFQUFFLEVBQUUsRUFBRTtJQUM3QyxNQUFNLElBQUksR0FBRyxPQUFPLEtBQUssQ0FBQyxJQUFJLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUM7SUFDeEYsTUFBTSxFQUFFLEtBQUssR0FBRyxDQUFDLEVBQUUsSUFBSSxHQUFHLGFBQWEsRUFBRSxJQUFJLEdBQUcsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDO0lBRTlELHdCQUF3QjtJQUN4QixNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBRXBFLE1BQU0sZUFBZSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWtCLENBQUM7SUFDdkQsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFFeEMsTUFBTSxPQUFPLEdBQUcsSUFBSSxrQ0FBcUIsQ0FBQztRQUN0QyxlQUFlO1FBQ2YsS0FBSztLQUNSLENBQUMsQ0FBQztJQUVILE1BQU0sTUFBTSxHQUFHLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUV2QyxPQUFPO1FBQ0gsVUFBVSxFQUFFLEdBQUc7UUFDZixPQUFPLEVBQUU7WUFDTCw2QkFBNkIsRUFBRSxHQUFHO1NBQ3JDO1FBQ0QsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxNQUFNLENBQUMsWUFBWSxFQUFFLENBQUM7S0FDeEUsQ0FBQztBQUNOLENBQUMsQ0FBQztBQXhCVyxRQUFBLE9BQU8sV0F3QmxCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU0ZOQ2xpZW50LCBTdGFydEV4ZWN1dGlvbkNvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LXNmblwiO1xuXG5jb25zdCBzZm4gPSBuZXcgU0ZOQ2xpZW50KCk7XG5cbmV4cG9ydCBjb25zdCBoYW5kbGVyID0gYXN5bmMgKGV2ZW50OiBhbnkgPSB7fSkgPT4ge1xuICAgIGNvbnN0IGJvZHkgPSB0eXBlb2YgZXZlbnQuYm9keSA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGV2ZW50LmJvZHkpIDogZXZlbnQuYm9keSB8fCB7fTtcbiAgICBjb25zdCB7IGNvdW50ID0gMSwgdHlwZSA9IFwid29yZF9zZWFyY2hcIiwgbGFuZyA9IFwiZW5cIiB9ID0gYm9keTtcblxuICAgIC8vIEJ1aWxkIHRoZSBpdGVtcyBhcnJheVxuICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogY291bnQgfSwgKCkgPT4gKHsgdHlwZSwgbGFuZyB9KSk7XG5cbiAgICBjb25zdCBzdGF0ZU1hY2hpbmVBcm4gPSBwcm9jZXNzLmVudi5TVEFURV9NQUNISU5FX0FSTiE7XG4gICAgY29uc3QgaW5wdXQgPSBKU09OLnN0cmluZ2lmeSh7IGl0ZW1zIH0pO1xuXG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBTdGFydEV4ZWN1dGlvbkNvbW1hbmQoe1xuICAgICAgICBzdGF0ZU1hY2hpbmVBcm4sXG4gICAgICAgIGlucHV0XG4gICAgfSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZm4uc2VuZChjb21tYW5kKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1c0NvZGU6IDIwMCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW5cIjogXCIqXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBvazogdHJ1ZSwgZXhlY3V0aW9uQXJuOiByZXN1bHQuZXhlY3V0aW9uQXJuIH0pXG4gICAgfTtcbn07XG4iXX0=