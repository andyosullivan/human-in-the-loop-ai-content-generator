"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handler = void 0;
const client_sfn_1 = require("@aws-sdk/client-sfn");
const sfn = new client_sfn_1.SFNClient();
const ITEM_TYPES = [
    "quiz_mcq",
    "word_search",
    "memory_match",
    "space_shooter",
    "jigsaw"
];
const handler = async (event = {}) => {
    const body = typeof event.body === 'string' ? JSON.parse(event.body) : event.body || {};
    const { count = 1, type, lang = "en" } = body;
    // Helper to pick a random type
    function randomType() {
        return ITEM_TYPES[Math.floor(Math.random() * ITEM_TYPES.length)];
    }
    // Build the items array
    const items = Array.from({ length: count }, () => ({
        type: randomType(),
        lang
    }));
    const stateMachineArn = process.env.STATE_MACHINE_ARN;
    const input = JSON.stringify({ items });
    const command = new client_sfn_1.StartExecutionCommand({
        stateMachineArn,
        input
    });
    const result = await sfn.send(command);
    return {
        statusCode: 200,
        headers: {
            "Access-Control-Allow-Origin": "*"
        },
        body: JSON.stringify({ ok: true, executionArn: result.executionArn })
    };
};
exports.handler = handler;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVxdWVzdEl0ZW1zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicmVxdWVzdEl0ZW1zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLG9EQUF1RTtBQUV2RSxNQUFNLEdBQUcsR0FBRyxJQUFJLHNCQUFTLEVBQUUsQ0FBQztBQUU1QixNQUFNLFVBQVUsR0FBRztJQUNmLFVBQVU7SUFDVixhQUFhO0lBQ2IsY0FBYztJQUNkLGVBQWU7SUFDZixRQUFRO0NBQ1gsQ0FBQztBQUVLLE1BQU0sT0FBTyxHQUFHLEtBQUssRUFBRSxRQUFhLEVBQUUsRUFBRSxFQUFFO0lBQzdDLE1BQU0sSUFBSSxHQUFHLE9BQU8sS0FBSyxDQUFDLElBQUksS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQztJQUN4RixNQUFNLEVBQUUsS0FBSyxHQUFHLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxHQUFHLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQztJQUVsRCwrQkFBK0I7SUFDM0IsU0FBUyxVQUFVO1FBQ2YsT0FBTyxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDckUsQ0FBQztJQUVMLHdCQUF3QjtJQUNwQixNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDL0MsSUFBSSxFQUFFLFVBQVUsRUFBRTtRQUNsQixJQUFJO0tBQ1AsQ0FBQyxDQUFDLENBQUM7SUFFSixNQUFNLGVBQWUsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFrQixDQUFDO0lBQ3ZELE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBRXhDLE1BQU0sT0FBTyxHQUFHLElBQUksa0NBQXFCLENBQUM7UUFDdEMsZUFBZTtRQUNmLEtBQUs7S0FDUixDQUFDLENBQUM7SUFFSCxNQUFNLE1BQU0sR0FBRyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFdkMsT0FBTztRQUNILFVBQVUsRUFBRSxHQUFHO1FBQ2YsT0FBTyxFQUFFO1lBQ0wsNkJBQTZCLEVBQUUsR0FBRztTQUNyQztRQUNELElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFDO0tBQ3hFLENBQUM7QUFDTixDQUFDLENBQUM7QUFoQ1csUUFBQSxPQUFPLFdBZ0NsQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNGTkNsaWVudCwgU3RhcnRFeGVjdXRpb25Db21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1zZm5cIjtcblxuY29uc3Qgc2ZuID0gbmV3IFNGTkNsaWVudCgpO1xuXG5jb25zdCBJVEVNX1RZUEVTID0gW1xuICAgIFwicXVpel9tY3FcIixcbiAgICBcIndvcmRfc2VhcmNoXCIsXG4gICAgXCJtZW1vcnlfbWF0Y2hcIixcbiAgICBcInNwYWNlX3Nob290ZXJcIixcbiAgICBcImppZ3Nhd1wiXG5dO1xuXG5leHBvcnQgY29uc3QgaGFuZGxlciA9IGFzeW5jIChldmVudDogYW55ID0ge30pID0+IHtcbiAgICBjb25zdCBib2R5ID0gdHlwZW9mIGV2ZW50LmJvZHkgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShldmVudC5ib2R5KSA6IGV2ZW50LmJvZHkgfHwge307XG4gICAgY29uc3QgeyBjb3VudCA9IDEsIHR5cGUsIGxhbmcgPSBcImVuXCIgfSA9IGJvZHk7XG5cbi8vIEhlbHBlciB0byBwaWNrIGEgcmFuZG9tIHR5cGVcbiAgICBmdW5jdGlvbiByYW5kb21UeXBlKCkge1xuICAgICAgICByZXR1cm4gSVRFTV9UWVBFU1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBJVEVNX1RZUEVTLmxlbmd0aCldO1xuICAgIH1cblxuLy8gQnVpbGQgdGhlIGl0ZW1zIGFycmF5XG4gICAgY29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBjb3VudCB9LCAoKSA9PiAoe1xuICAgICAgICB0eXBlOiByYW5kb21UeXBlKCksXG4gICAgICAgIGxhbmdcbiAgICB9KSk7XG5cbiAgICBjb25zdCBzdGF0ZU1hY2hpbmVBcm4gPSBwcm9jZXNzLmVudi5TVEFURV9NQUNISU5FX0FSTiE7XG4gICAgY29uc3QgaW5wdXQgPSBKU09OLnN0cmluZ2lmeSh7IGl0ZW1zIH0pO1xuXG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBTdGFydEV4ZWN1dGlvbkNvbW1hbmQoe1xuICAgICAgICBzdGF0ZU1hY2hpbmVBcm4sXG4gICAgICAgIGlucHV0XG4gICAgfSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZm4uc2VuZChjb21tYW5kKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1c0NvZGU6IDIwMCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW5cIjogXCIqXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBvazogdHJ1ZSwgZXhlY3V0aW9uQXJuOiByZXN1bHQuZXhlY3V0aW9uQXJuIH0pXG4gICAgfTtcbn07XG4iXX0=